(function(){"use strict";var e={143:function(e,t,a){var n=a(471),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("WithStreamlitConnection",{scopedSlots:e._u([{key:"default",fn:function({args:e}){return[t("block-editor",{attrs:{args:e}})]}}])})],1)},s=[],i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[""!=e.componentError?t("div",[t("h1",{staticClass:"err__title"},[e._v("Component Error")]),t("div",{staticClass:"err__msg"},[e._v(e._s(e.componentError))])]):void 0!=e.renderData?e._t("default",null,{args:e.renderData.args,disabled:e.renderData.disabled}):e._e()],2)},r=[],l=a(6),c=n["default"].extend({name:"withStreamlitConnection",data:()=>({renderData:void 0,componentError:""}),methods:{onRenderEvent:function(e){const t=e;this.renderData=t.detail,this.componentError=""}},mounted(){l.wk.events.addEventListener(l.wk.RENDER_EVENT,this.onRenderEvent),l.wk.setComponentReady(),l.wk.setFrameHeight()},updated(){l.wk.setFrameHeight()},destroyed(){l.wk.events.removeEventListener(l.wk.RENDER_EVENT,this.onRenderEvent)},errorCaptured(e){this.componentError=String(e)}}),d=c,u=a(656),m=(0,u.A)(d,i,r,!1,null,"42636045",null),v=m.exports,h=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"editorCanvas"}},[t("div",{staticClass:"modal",style:"display: none;"},[t("div",{staticClass:"modal-content"},[t("span",{staticClass:"close",on:{click:function(t){e.menuModal=!e.menuModal}}},[e._v("Ã—")]),t("div",{staticClass:"tab"},[t("button",{staticClass:"tablinks",class:e.listTab?"active":"",on:{click:function(t){return e.activateTab("listTab")}}},[e._v(" List ")]),t("button",{staticClass:"tablinks",class:e.saveTab?"active":"",on:{click:function(t){return e.activateTab("saveTab")}}},[e._v(" Save ")])]),t("div",{staticClass:"tabcontent",style:e.listTab?"display: block;":"display: none;"},[t("label",[e._v("List of saved schemas")]),t("ul",e._l(e.loadSchemas,(function(a,n){return t("li",{key:n},[e._v(" "+e._s(a)+" ")])})),0),t("p",[e._v(" Current schema: "),t("span",{staticStyle:{"font-weight":"600"}},[e._v(e._s(this.loadSchemaName))])])]),t("div",{staticClass:"tabcontent",style:e.saveTab?"display: block;":"display: none;"},[t("label",[e._v("Enter name to save schema as")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.saveSchemaName,expression:"saveSchemaName"}],attrs:{placeholder:"Schema name"},domProps:{value:e.saveSchemaName},on:{input:function(t){t.target.composing||(e.saveSchemaName=t.target.value)}}}),""!==e.saveSchemaName?t("button",{staticClass:"modal-button",on:{click:e.saveEditorData}},[e._v(" Save ")]):t("button",{staticClass:"modal-button modal-button-disabled",on:{click:e.saveEditorData}},[e._v(" Save ")]),this.saveSchemaName===this.loadSchemaName?t("p",[e._v(" The entered schema name is similar to one already existing in the database, saving will override the data for the schema name. ")]):e._e()])])]),t("baklava-editor",{attrs:{plugin:e.viewPlugin}}),t("div",{staticClass:"button-menu"},[t("button",{on:{click:e.saveEditorData}},[e._v("Save")]),t("button",{on:{click:e.executeEditorData}},[e._v("Refresh")])])],1)},p=[],f=a(524),b=a(456),_=a(537),g=a(268);function y({BlockName:e,Inputs:t,Outputs:a,Options:n}){const o=new f.sj(e);return o.setName(e),t.forEach((e=>{o.addInputInterface(e.name,e.type,e.value,e.properties)})),a.forEach((e=>{o.addOutputInterface(e.name,e.type,e.value,e.properties)})),n.forEach((e=>{o.addOption(e.name,e.type,e.value,e.sidebar,e.properties)})),o.build()}var k={name:"BlockEditor",props:["args"],data(){return{editor:new f.KE,viewPlugin:new b.Z9,engine:new g.N$(!0),menuModal:!1,listTab:!0,saveTab:!1,saveSchemaName:"",loadSchemaName:"",loadSchemas:[],BlockNameID:{}}},created(){this.loadSchemas=this.args.load_schema_names,this.editor.use(this.viewPlugin),this.editor.use(new _.hT),this.editor.use(this.engine),this.viewPlugin.enableMinimap=!0,console.log(this.args),this.args.base_blocks.forEach((e=>{const t=y({BlockName:e.name,Inputs:e.inputs,Outputs:e.outputs,Options:e.options});Object.prototype.hasOwnProperty.call(e,"category")?this.editor.registerNodeType(e.name,t,e.category):this.editor.registerNodeType(e.name,t),this.BlockNameID[e.name]=1})),this.args.load_editor_schema&&this.editor.load(this.args.load_editor_schema),this.loadSchemaName=this.args.load_schema_name,this.editor.events.addNode.addListener(this,(e=>{this.editor._nodes.forEach((t=>{t.id===e.id&&(t.name=t.name+"-"+this.BlockNameID[e.name]++)}))}))},mounted(){const e=document.querySelectorAll(".node .__content .__options");Array.from(e).forEach((e=>{var t=document.createElement("button");t.textContent="Edit",t.onclick=()=>{this.viewNode(e.parentNode.parentNode.id)},e.appendChild(t)}))},methods:{executeEditorData(){l.wk.setComponentValue({command:"execute",editor_state:this.editor.save()})},saveEditorData(){l.wk.setComponentValue({command:"save",schema_name:this.saveSchemaName,editor_state:this.editor.save()}),this.saveSchemaName=""},activateTab(e){"listTab"===e&&(this.listTab=!0,this.saveTab=!1),"saveTab"===e&&(this.listTab=!1,this.saveTab=!0)},viewNode(e){l.wk.setComponentValue({command:"view_node",editor_state:this.editor.save(),view_node:e})}}},E=k,w=(0,u.A)(E,h,p,!1,null,null,null),S=w.exports,N={name:"App",components:{WithStreamlitConnection:v,BlockEditor:S}},C=N,T=(0,u.A)(C,o,s,!1,null,null,null),O=T.exports;n["default"].use(b.EA),n["default"].config.productionTip=!1,n["default"].config.devtools=!1,n["default"].prototype.log=console.log,new n["default"]({render:e=>e(O)}).$mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,s){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],s=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(r=!1,s<i&&(i=s));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,o,s]}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,s,i=n[0],r=n[1],l=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var d=l(a)}for(t&&t(n);c<i.length;c++)s=i[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(143)}));n=a.O(n)})();
//# sourceMappingURL=app.ad258b94.js.map